# this

- this 는 자신이 속한 객체 또는 자신이 생성할 인스턴스를 가리키는 참조 변수
- this를 통해 자신이 속한 객체 또는 자신이 생성할 인스턴스의 프로퍼티나 메서드를 참조

<br />

### Global Scope : 전역 범위

- "this"가 전역 범위(함수 또는 개체 외부)에서 사용되는 경우 전역 개체를 나타낸다. 웹 브라우저에서 전역 개체는 일반적으로 창 개체, Node.js에서는 전역 개체라고 한다.

```javascript
console.log(this); // window
// this는 어디서든 참조 가능하며 전역에서 this는 window를 가리킴
```

<br />

### 함수 호출

- 함수가 독립 실행형 함수로 호출 될 때 this 값은 실행 컨텍스트에 의해 결정
- this가 정의 되지 않는 엄격 모드를 사용하지 않는 한 this는 전역개체를 나타낸다

```javascript
function greet() {
  console.log(this);
}

greet();

====================================================================================================

function square(number) {
  //일반 함수 내부에서 this는 전역 객체 window를 가리킴
  console.log(this); // window
  return number * number;
}
squaer(2);
```

<br />

### 메서드 호출

- 함수가 개체의 메서드로 호출될 때 "this"는 개체 자체를 나타낸다.
- "this" 값은 점 왼쪽에 있는 개체(메서드를 소유하거나 호출하는 개체)로 설정된다.

```javascript
//객체 리터럴
const circle = {
  radius: 5,
  getDiameter() {
    //this는 메서드를 호출한 객체를 가리킨다.
    return 2 * this.radius;
  },
};
console.log(circle.getDiameter()); // 10

====================================================================================================

const person = {
  name: 'John',
  greet: function() {
    console.log(this.name); // Outputs 'John'
  }
};

person.greet();

====================================================================================================

const person = {
  name: "Lee",
  getName() {
    //메서드 내부에서 this는 메서드를 호출한 객체를 가리킨다
    console.log(this); // {name : "Lee", getName: f}
    return this.name;
  },
};
console.log(person.getName()); //  Lee
```

<br />

### 생성자 호출

- 함수가 새 객체를 생성하기 위해 new키워드와 함께 생성자로 사용될 때 this는 새로 생성된 객체를 나타냄

```javascript

function Person(name) {
  this.name = name;
}

const john = new Person('John');
console.log(john.name); // Outputs 'John'

====================================================================================================

function Person(name) {
  this.name = name;
  //생성자 함수 내부에서 this는 생성자 함수가 생성할 인스턴스를 가리킨다.
  console.log(this); // Person {name:"Lee"}

  const me = new Person("Lee");
}
```

<br />

### this의 바인딩

- EC(Execution Context)가 생성될 때마다 this의 바인딩이 일어나며, 우선순위 순으로 나열해보면 다음과 같다.

1.  `new` 를 사용했을 때 해당 객체로 바인딩 된다.

```javascript
var name = "global";
function Func() {
  this.name = "Func";
  this.print = function f() {
    console.log(this.name);
  };
}
var a = new Func();
a.print(); // Func
```

2.  call, apply, bind 와 같은 명시적 바인딩을 사용했을 때 인자로 전달된 객체에 바인딩 된다.

```javascript
function func() {
  console.log(this.name);
}

var obj = { name: "obj name" };
func.call(obj); // obj name
func.apply(obj); // obj name
func.bind(obj)(); // obj name
```

3.  객체의 메소드로 호출할 경우 해당 객체에 바인딩 된다.

```javascript
var obj = {
  name: "obj name",
  print: function p() {
    console.log(this.name);
  },
};
obj.print(); // obj name
```

4.  그 외의 경우

- strict mode : `undefined`로 초기화된다.
- 일반 : 브라우저라면 `window` 객체에 바인딩 된다.
